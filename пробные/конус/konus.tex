







                                -- (\rx,\z-\ry*\ry/\z);
      -- (intersection-2) -- cycle;
    % base of cone in ball
    % radius to base of cone in ball
    \def\rx{0.71}% horizontal radius of the ellipse
    \def\ry{0.15}% vertical radius of the ellipse
    \def\z{0.725}% distance from center of ellipse to origin
    \draw[fill = gray!30, densely dashed] (0,\z) ellipse ({\rx} and {\ry});
    \draw[fill = gray!50, gray!50] (intersection-1) -- (0,0)
    \path [name intersections = {of = ellipse and horizontal}];
    \path [name path = ellipse]    (0,\z) ellipse ({\rx} and {\ry});
    \path [name path = horizontal] (-\rx,\z-\ry*\ry/\z)
    x radius = 13.75mm, y radius = 3.15mm];
    x radius = 13.8mm, y radius = 3.6mm];
    x radius = 17.6mm, y radius = 14.75mm];
  % ball
  % ball background color
  % cone
  % cut of ball surface
  % label of ball center point
  % label of cone
  % label of cut of ball surface
  % radius
  \begin{scope}
  \coordinate (O) at (0,0);
  \draw (-1.2,2.2) -- (-0.53,1.83) node at (-1.37,2.37) {$A$};
  \draw (0.25,0.4) -- (0.9,0.1) node at (1.05,0.0) {$q$};
  \draw (O) circle [radius=2cm];
  \draw[densely dashed] (O) -- (1.33,1.33);
  \draw[densely dashed] (O) to [edge label = $r$] (-1.33,1.33);
  \draw[red, densely dashed] (-1.36,1.46) arc [start angle = 170, end angle = 10,
  \draw[red] (-1.29,1.52) arc [start angle=-200, end angle = 20,
  \draw[red] (-1.35,1.47) arc [start angle = 140, end angle = 40,
  \end{scope}
  \filldraw (O) circle (1pt) node[below] {$P$};
  \shade[ball color = blue, opacity = 0.2] (0,0) circle [radius = 2cm];
\begin{document}
\begin{tikzpicture}[font = \sansmath]
\documentclass[tikz,border=10pt]{standalone}
\end{document}
\end{tikzpicture}
\usepackage{sansmath}
\usetikzlibrary{shadings,intersections}
s